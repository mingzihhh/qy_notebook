## AMD：异步的require

`AMD (Asynchronous Module Definition, 异步模块定义) `指定一种机制，在该机制下模块和依赖可以异步加载。这对**浏览器端的异步加载**尤其适用。

模块将被异步加载，模块加载不影响后面语句的运行，所有依赖某些模块的语句均放置在回调函数中。

由于Node.js主要用于服务器编程，模块文件一般都已经存在于本地硬盘，所以加载起来比较快，不用考虑非同步加载的方式，所以CommonJS规范比较适用。但是，**如果是浏览器环境，要从服务器端加载模块，这时就必须采用非同步模式，因此浏览器端一般采用AMD规范**。



实现AMD的库有RequireJS 、curl 、Dojo 等。`

AMD规范只定义了一个函数 `define`，它是全局变量。

**定义暴露模块**:

```
//定义没有依赖的模块
define(function(){
   return 模块
})

//定义有依赖的模块
define(['module1', 'module2'], function(m1, m2){
   return 模块
})
```

**引入使用模块**:

```
require(['module1', 'module2'], function(m1, m2){
   使用m1/m2
})
```

require()函数在加载依赖的函数的时候是异步加载的，这样浏览器不会失去响应，它指定的回调函数，只有前面的模块都加载成功后，才会运行，解决了依赖性的问题。



#### 为什么要用requireJS

试想一下，如果一个网页有很多的js文件，那么浏览器在下载该页面的时候会先加载js文件，从而停止了网页的渲染，如果文件越多，浏览器可能失去响应。其次，要保证js文件的依赖性，依赖性最大的模块（文件）要放在最后加载，当依赖关系很复杂的时候，代码的编写和维护都会变得困难。

RequireJS就是为了解决这两个问题而诞生的：

```
（1）实现js文件的异步加载，避免网页失去响应；
（2）管理模块之间的依赖性，便于代码的编写和维护。
```



#### AMD 规范的实现有：

- require.js - client 端
- curl - client 端



**优点：**

- 符合了在网络中异步请求的风格
- 可以并行加载多个模块

**缺点：**

- 编码成本增加,可读性不好写起来麻烦
- 更像是一种临时修补方案