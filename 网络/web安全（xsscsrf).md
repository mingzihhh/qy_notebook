## web安全

#### XSS Cross-Site Scripting 

跨站脚本攻击，允许恶意web用户将代码植入到提供给其它用户使用的页面中。

**攻击原理：**

攻击者将恶意的js代码插入到了页面中。当其他用户浏览该网页时，恶意的js代码会被执行，从而达到攻击的目的。

- 反射型xss

  漏洞产生的原因是攻击者注入的数据反映在响应中。

  攻击者要求用户访问一个被攻击者篡改后的链接，用户访问该链接时，被植入的攻击脚本被用户游览器执行，从而达到攻击目的。

- 存储型xss

  M用户的畸形输入 -> 后台服务器未经任何处理就存储 -> 其他用户T请求数据 -> M用户的畸形输入返回给T -> 用户T打开页面，XSS代码运行

  比如在某个评论区提交了XSS代码，并且这些评论都被存储到服务器中。那么所有打开评论列表页面的用户都会收到XSS代码的攻击。

- dom xss

  基于DOM型的XSS是不需要与服务器交互的，它只发生在客户端处理数据阶段。简单理解DOM XSS就是出现在javascript代码中的xss漏洞。

  这种利用也需要受害者点击链接来触发，DOM型XSS是前端代码中存在了漏洞，而反射型是后端代码中存在了漏洞。

**防范手段：**

- 转义输入输出的内容，对于引号、尖括号、斜杠进行转义

- 白名单过滤：防止把需要的格式也过滤掉

- 对用户身份等cookie层面的信息进行http-only处理。

#### CSRF  Cross Site Request Forgery

跨站请求伪造，攻击者盗用了你的身份，以你的名义发送恶意请求。

CSRF能够做的事情包括：以你名义发送邮件，发消息，盗取你的账号，甚至于购买商品，虚拟货币转账......造成的问题包括：个人隐私泄露以及财产安全

**攻击原理：**

攻击者构造网站后台某个功能接口的请求地址，诱导用户去点击或者用特殊方法让该请求地址自动加载。用户在登录状态下这个请求被服务端接收后会被误以为是用户合法的操作。

对于 GET 形式的接口地址可轻易被攻击，对于 POST 形式的接口地址也不是百分百安全，攻击者可诱导用户进入带 Form 表单可用POST方式提交参数的页面。

**防范手段：**

- 客户端防范：对于数据库的修改请求，全部使用POST提交，禁止使用GET请求。

- 服务器端防范：一般的做法是在表单里面添加一段隐藏的唯一的token(请求令牌)。

防范 CSRF 攻击可以遵循以下几种规则：

1. Get 请求不对数据进行修改
2. 不让第三方网站访问到用户 Cookie
3. 阻止第三方网站请求接口
4. 请求时附带验证信息，比如验证码或者 Token



### 跳转安全

比如单点 URL 跳转（比如点击链接跳转到另一个页面或重定向）时遇到网络攻击或恶意请求，可能带来安全风险。

**防范手段：**

- referer 限制：确定传递参数的引入来源，保证 url 的有效性，避免恶意用户自己生成的链接
- token 验证
- 服务端做好域名白名单或者跳转白名单，只对合法的 url 进行跳转（常用）