约定式路由是基于文件系统的路由方案：**文件夹和文件的结构决定了应用的路由结构**。在 Next.js 中，`pages` 文件夹的内容会自动映射到相应的 URL 路径：

- `/pages/index.js` → `/`
- `/pages/about.js` → `/about`
- `/pages/blog/[id].js` → `/blog/:id`

开发者无需手动定义路由配置，框架自动处理文件和路由之间的映射。



**优点：**

- **提高开发效率**：减少手动配置工作，开发者专注于业务逻辑。
- **降低学习成本**：文件结构即路由结构，直观易懂。
- **动态路由支持**：通过文件名实现，简单而强大。
- **性能优化**：自动支持静态生成和按需加载。
  - **静态页面的自动生成**： 使用约定式路由时，Next.js 能够自动确定哪些页面可以预渲染（如 `getStaticProps`），并在构建时生成对应的静态文件。这种机制大大提升了页面加载速度。
  - **按需加载**： 文件系统的模块化特性使得页面组件可以被独立打包，Next.js 基于路由实现了按需加载。用户访问某个路由时，只加载对应的页面组件，减少初始加载的资源体积。
- **现代化趋势**：符合前端框架零配置化的发展方向。



**缺点：**

| **缺点**                                                     | **影响**                                   | **应对策略**                                                 |
| ------------------------------------------------------------ | ------------------------------------------ | ------------------------------------------------------------ |
| 难以应对复杂场景，比如路由需要根据用户权限、环境变量或外部数据动态生成 | 复杂逻辑的动态路由生成困难                 | 使用 `rewrites`、`API 路由` 或显式路由配置辅助               |
| 文件结构依赖性强                                             | 文件嵌套深或调整文件名带来维护成本高       | 合理规划结构，结合路径重写减少直接依赖                       |
| 缺乏显式路由配置                                             | 难以快速查看全局路由结构                   | 借助工具生成路由表或文档，例如结合文件系统自动扫描生成路由文档；在代码中定义一个全局映射表（即显式配置），用于记录和管理路由 |
| 路径变更成本高                                               | 调整路径时需要改动文件结构，影响 SEO       | 使用 `rewrites` 和 `redirects` 进行路径映射                  |
| 动态路由文件名不直观                                         | 动态参数嵌套时，文件名变得复杂             | 加注释或在文档中说明文件名与路径关系                         |
| 跨文件夹共享逻辑困难                                         | 相同页面逻辑在不同路径下需要重复创建文件   | 抽离共享逻辑，封装成独立组件并在不同路径下复用               |
| 初学者可能误解机制                                           | 理解约定式路由的自动化过程可能需要学习时间 | 提供文档和注释说明，帮助新手掌握文件名和路径的映射规则       |





#### 不改变文件结构修改路由的方式

**小范围调整**： 如果只是针对个别页面的路径变更，使用动态路由或封装跳转逻辑即可。

**大范围调整**： 如果是全局路径规则变化，推荐使用 `next.config.js` 的 `rewrites` 配置。它可以一次性调整大量路径，同时保持文件结构不变。

**复杂业务逻辑**： 如果路径映射涉及多种条件和动态生成，建议通过 API 路由或在服务端集中管理。