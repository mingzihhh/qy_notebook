- 上传视频

express + multer 设置路径

- 视频加密

只能处理MP4视频

通过fluent-ffmpeg设置分段时间和密钥

将MP4文件转为HLS（m3u8+ts），转码时加密

- 检查视频

根据视频名找到对应m3u8文件，从m3u8文件找到加密方式和解密url

- 验证身份

如果请求key文件，就验证session 登录名，如果用户名正确就根据url返回密钥，否则返回错误

- 视频解密播放