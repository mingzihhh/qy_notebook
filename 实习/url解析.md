## url解析

URL是因特网资源的标准化名称，URI是通用的资源标识符，URL是URI的子集。

URL分三部分组成，比如我们访问一个网站

**http://www.jianshu.com/writer#/notebooks/13649415/notes/16981936**

第一部分  (http)是URL的方案（scheme）,方案可以告诉web客户端怎样访问资源，在这里说明URL使用的是HTTP协议。

第二部分（www.jianshu.com）表示的是服务器的位置。

第三部分（writer#/notebooks/13649415/notes/16981936）是资源路径，路径说明是请求的服务器上那个本地的资源。

#### url编码 - 非法字符

Url中有些字符会引起歧义，需要进行编码

RFC3986文档规定，Url中只允许包含英文字母（a-zA-Z）、数字（0-9）、-_.~4个特殊字符以及所有保留字符。

**保留字符**：Url可以划分成若干个组件，协议、主机、路径等。有一些字符是用作分隔不同组件的。例如：：用于分隔协议和主 机，/用于分隔主机和路径，?用于分隔路径和查询参数，等等。还有一些字符用于在每个组件中起到分隔作用的，如=用于 表示查询参数中的键值对，&符号用于分隔查询多个键值对。当组件中的普通数据包含这些特殊字符时，需要对其进行编码。

RFC3986中指定了以下字符为保留字符：! * ' ( ) ; : @ & = + $ , / ? # [ ]

**不安全字符**：还有一些字符，当他们直接放在Url中的时候，可能会引起解析程序的歧义。这些字符被视为不安全字符，原因有很多。

- 空格：Url在传输的过程，或者用户在排版的过程，或者文本处理程序在处理Url的过程，都有可能引入无关紧要的空格，或者将那些有意义的空格给去掉。

- 引号以及<>：引号和尖括号通常用于在普通文本中起到分隔Url的作用

- \#：通常用于表示书签或者锚点

- %：百分号本身用作对不安全字符进行编码时使用的特殊字符，因此本身需要编码

- {}|\^[]`~：某一些网关或者传输代理会篡改这些字符

  

#### 如何编码

Javascript中提供了3对函数用来对Url编码以得到合法的Url，它们分别是

- escape / unescape

  （69个）：*/@+-._0-9a-zA-Z

- encodeURI / decodeURI

  （82个）：!#$&'()*+,/:;=?@-._~0-9a-zA-Z

- encodeURIComponent / decodeURIComponent 常用

  （71个）：!'()*-._~0-9a-zA-Z

  

#### 服务器如何访问url

解码url，按照url对应的文件位置进行映射

<https://blog.csdn.net/finish_dream/article/details/53178123>
