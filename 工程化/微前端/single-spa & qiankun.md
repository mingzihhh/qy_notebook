## single-spa

single-spa是最早的微前端框架，兼容多种前端技术栈。

它仅仅是一个子应用生命周期的调度者，也就是上文提到的加载器。

- 实现一套生命周期，在 load 时加载子 app，其他的生命周期由开发者自己玩
- 监听 url 的变化，url 变化时，会使得某个子 app 变成 active 状态，然后走整套生命周期

single-spa不是一个完整的微前端解决方案，对于一些微前端应该支持的功能都没有支持，完全交给开发者处理

- 无通信机制
- 不支持 Javascript 沙箱
- 样式冲突
- 无法预加载



## Qiankun

Qiankun 是一个基于 single-spa ，阿里系开源的微前端框架

加载器：基于single-spa实现

沙箱：基于js eval实现

| **优点**                                                     | **缺点**             |
| ------------------------------------------------------------ | -------------------- |
| HTML Entry 接入方式：浏览器可以直接将 HTML entry 渲染为一个完整的页面，不需要其他额外的初始化代码。 | 学习、改造成本高     |
| 支持沙箱：快照沙箱、proxySandbox、lagacySandbox              | eval函数的安全和性能 |
| 资源预加载                                                   | 没有部署平台         |
| 支持主子应用通信                                             |                      |
| 社区较为活跃                                                 |                      |



其他：

可以用 new Function 代替 eval，new Function通过传入一个string作为函数的的主体同时返回一个新函数

对比eval，有两点比较重要的不同：

- 不能访问当前环境的变量，但是可以访问全局变量，安全性更高
- 仅需要处理传入的字符串一次，后面重复执行都是同一个函数，而eval需要每次都处理，性能更高