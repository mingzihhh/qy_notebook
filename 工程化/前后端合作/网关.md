在前端的http请求和后端的rpc服务中间需要有一层http服务。http服务负责如下的工作：

1. 接口路由
2. 参数解析
3. 协议转化
4. 流量治理：降级，调度，限流，超时
5. 安全与认证：csrf，验签，对接 API 安全网关
6. 其他业务支持：登录态，附身登录，游客访问，客户资质，权限校验



采用分布式网关，网关以独立的进程部署在业务实例中，流量从TLB直接到业务集群，通过网关转发到业务实例，可以减少整体时延，业务 PSM 完全隔离，隔离性和稳定性更好



**TLB和AGW的区别**

TLB负责流量调度，将某个path流量到对应的资源上

AGW（API Gateway）具备路由，协议转换，参数绑定等等多个功能。