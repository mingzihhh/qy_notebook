改善 npm 的 **一致性、安全性、离线安装和性能方面的问题**

1. 一致性&安全性：增加 lockfiles（yarn.lock），安装依赖时会根据 package.json 计算 lock 结构，用来确定依赖、子依赖、以及子依赖的子依赖等依赖包的结构顺序，安装时将优先参考 lock 文件的提供的版本。即使是安装顺序不同，也能保证 node_modules 文件相同。

2. 缓存机制：每次从网络下载一个依赖包时，yarn都会将其放在本地的全局缓存中，下次下载会优先在全局缓存目录中查找，如果有，将其**copy**到当前目录下，离线安装

3. 性能问题：并行安装。无论是 npm 还是 yarn，在安装时都会执行一系列任务。npm 是按照队列执行每一个 package：当前的package 安装完成后，再去执行下一个package，而 yarn 是同步执行所有的任务。

   

仍然没有解决的问题：

1. 多项目之间的包复用
1. 幽灵依赖