### 路由懒加载

SPA 项目，一个路由对应一个页面，如果不做处理，项目打包后，会把所有页面打包成一个文件，**当用户打开首页时，会一次性加载所有的资源**，造成首页加载很慢，降低用户体验。

使用异步组件作为路由组件，暂时略过了那些不是立即需要的功能， Rollup (Vite 就是基于它之上开发的) 或者 webpack 这样的打包工具可以通过分析 ESM 动态导入的语法来自动进行代码分割，减小首屏加载需要获取的资源

### 组件懒加载

比如页面使用了弹窗组件，但是该弹窗不是一进入页面就加载，而是需要用户手动触发后才展示出来，可以使用看加载的方式引入，使用户触发按钮后再加载弹窗组件资源。

有时资源拆分的过细也不好，可能会造成浏览器 http 请求的增多，总结出三种适合组件懒加载的场景：

1. 该页面的 JS 文件体积大，导致页面打开慢，可以通过组件懒加载进行资源拆分，利用浏览器并行下载资源，提升下载速度（比如首页）

2. 该组件不是一进入页面就展示，需要一定条件下才触发（比如弹框组件）

3. 该组件复用性高，很多页面都有引入，利用组件懒加载抽离出该组件，一方面可以很好利用缓存，同时也可以减少页面的 JS 文件大小（比如表格组件、图形组件等）

### 资源懒加载

对于图片而言，在页面刚加载的时候可以只加载第一屏，当用户继续往后滚屏的时候才加载后续的图片。这样一来，假如用户只对第一屏的内容感兴趣时，那剩余的图片请求就都节省了。

懒加载的原理就是只加载自定义区域（通常是可视区域，但也可以是即将进入可视区域）内需要加载的东西。对于图片来说，先设置图片标签的 `src` 属性为一张占位图，将真实的图片资源放入一个自定义属性中，当进入自定义区域时，就将自定义属性替换为 `src` 属性，这样图片就会去下载资源，实现了图片懒加载。

懒加载不仅可以用于图片，也可以使用在别的资源上。比如进入可视区域才开始播放视频等等